imports:
    - { resource: forms.yml }

services:
    dende.front.manager.car:
        class: Dende\FrontBundle\Manager\CarManager
        arguments:
            - @doctrine.orm.default_entity_manager
            - Dende\FrontBundle\Entity\Car
        calls:
            - [setRepositoryLocale, [@service_container]]

    dende.front.manager.color:
        class: Dende\FrontBundle\Manager\ColorManager
        arguments:
            - @doctrine.orm.default_entity_manager
            - Dende\FrontBundle\Entity\Color
        calls:
            - [setRepositoryLocale, [@service_container]]

    dende.twig_extension.instance_of:
        class: Dende\FrontBundle\Twig\InstanceOfExtension
        tags:
            - { name: twig.extension }

    dende.front.factory.type:
        class: Dende\FrontBundle\Entity\Factory\TypeFactory

    front_bundle.menu_builder:
        class: Dende\FrontBundle\Menu\MenuBuilder
        arguments:
            - "@knp_menu.factory"

    front_bundle.menu.lang:
        class: Knp\Menu\MenuItem
        factory_service: front_bundle.menu_builder
        factory_method: createLangMenu
        arguments: ["@request"]
        scope: request
        tags:
            - { name: knp_menu.menu, alias: langMenu }

    front_bundle.menu.main:
        class: Knp\Menu\MenuItem
        factory_service: front_bundle.menu_builder
        factory_method: createMainMenu
        arguments: ["@request"]
        scope: request
        tags:
            - { name: knp_menu.menu, alias: mainMenu }

    front_bundle.locale_listener:
        class: Dende\FrontBundle\Service\Listener\LocaleListener
        arguments: ["%kernel.default_locale%"]
        tags:
            - { name: kernel.event_subscriber }
